{"version":3,"file":"index.modern.js","sources":["../src/actions/sipAccounts.ts","../src/actions/sipSessions.ts","../src/actions/config.ts","../src/util/hold.ts","../src/actions/device.ts","../src/util/audio.ts","../src/util/TonePlayer.ts","../src/util/ToneManager.ts","../src/util/sessions.ts","../src/util/incomingSession.ts","../src/lib/SipAccount.ts","../src/SipWrapper.tsx","../src/components/Status.tsx","../src/components/phone/DialButton.tsx","../src/util/buttons.ts","../src/components/phone/Dialpad.tsx","../src/components/phone/Hold.tsx","../src/components/phone/Mute.tsx","../src/components/phone/BlindTransfer.tsx","../src/components/phone/AttendedTransfer.tsx","../src/components/phone/Phone.tsx","../src/components/phone/Incoming.tsx","../src/components/PhoneSessions.tsx","../src/components/Dialstring.tsx","../src/reducers/sipSessions.ts","../src/reducers/sipAccounts.ts","../src/reducers/device.ts","../src/reducers/config.ts","../src/reducers/index.ts","../src/store/configureStore.ts","../src/index.tsx"],"sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport SIPAccount from '../lib/SipAccount'\n\nexport const SIPACCOUNT_UNREGISTERED = 'SIPACCOUNT_UNREGISTERED'\nexport const NEW_USERAGENT = 'NEW_USERAGENT'\nexport const NEW_ACCOUNT = 'NEW_ACCOUNT'\n\nexport const setNewAccount = (account: SIPAccount) => {\n  return { type: NEW_ACCOUNT, payload: account }\n}","import { Session, SessionState } from 'sip.js'\nimport { Dispatch } from 'redux'\n\nexport const NEW_SESSION = 'NEW_SESSION'\nexport const NEW_ATTENDED_TRANSFER = 'NEW_ATTENDED_TRANSFER'\nexport const INCOMING_CALL = 'INCOMING_CALL'\n\nexport const ACCEPT_CALL = 'ACCEPT_CALL'\nexport const DECLINE_CALL = 'DECLINE_CALL'\n\nexport const SIPSESSION_STATECHANGE = 'SIPSESSION_STATECHANGE'\nexport const CLOSE_SESSION = 'CLOSE_SESSION'\n\nexport const SIPSESSION_MAKECALL_REQUEST = 'SIPSESSION_MAKECALL_REQUEST'\nexport const SIPSESSION_MAKECALL_SUCCESS = 'SIPSESSION_MAKECALL_SUCCESS'\nexport const SIPSESSION_MAKECALL_FAIL = 'SIPSESSION_MAKECALL_FAIL'\n\nexport const SIPSESSION_HOLD_REQUEST = 'SIPSESSION_HOLD_REQUEST'\nexport const SIPSESSION_HOLD_SUCCESS = 'SIPSESSION_HOLD_SUCCESS'\nexport const SIPSESSION_HOLD_FAIL = 'SIPSESSION_HOLD_FAIL'\nexport const SIPSESSION_UNHOLD_REQUEST = 'SIPSESSION_UNHOLD_REQUEST'\nexport const SIPSESSION_UNHOLD_SUCCESS = 'SIPSESSION_UNHOLD_SUCCESS'\nexport const SIPSESSION_UNHOLD_FAIL = 'SIPSESSION_UNHOLD_FAIL'\n\nexport const SIPSESSION_MUTE_REQUEST = 'SIPSESSION_MUTE_REQUEST'\nexport const SIPSESSION_MUTE_SUCCESS = 'SIPSESSION_MUTE_SUCCESS'\nexport const SIPSESSION_MUTE_FAIL = 'SIPSESSION_MUTE_FAIL'\nexport const SIPSESSION_UNMUTE_REQUEST = 'SIPSESSION_UNMUTE_REQUEST'\nexport const SIPSESSION_UNMUTE_SUCCESS = 'SIPSESSION_UNMUTE_SUCCESS'\nexport const SIPSESSION_UNMUTE_FAIL = 'SIPSESSION_UNMUTE_FAIL'\n\nexport const SIPSESSION_BLIND_TRANSFER_REQUEST =\n  'SIPSESSION_BLIND_TRANSFER_REQUEST'\nexport const SIPSESSION_BLIND_TRANSFER_SUCCESS =\n  'SIPSESSION_BLIND_TRANSFER_SUCCESS'\nexport const SIPSESSION_BLIND_TRANSFER_FAIL = 'SIPSESSION_BLIND_TRANSFER_FAIL'\n\nexport const SIPSESSION_ATTENDED_TRANSFER_REQUEST =\n  'SIPSESSION_ATTENDED_TRANSFER_REQUEST'\nexport const SIPSESSION_ATTENDED_TRANSFER_PENDING =\n  'SIPSESSION_ATTENDED_TRANSFER_PENDING'\nexport const SIPSESSION_ATTENDED_TRANSFER_READY =\n  'SIPSESSION_ATTENDED_TRANSFER_READY'\nexport const SIPSESSION_ATTENDED_TRANSFER_CANCEL =\n  'SIPSESSION_ATTENDED_TRANSFER_CANCEL'\nexport const SIPSESSION_ATTENDED_TRANSFER_FAIL =\n  'SIPSESSION_ATTENDED_TRANSFER_FAIL'\nexport const SIPSESSION_ATTENDED_TRANSFER_SUCCESS =\n  'SIPSESSION_ATTENDED_TRANSFER_SUCCESS'\n\nexport const stateChange = (newState: SessionState, id: string) => (\n  dispatch: Dispatch\n) => {\n  dispatch({\n    type: SIPSESSION_STATECHANGE,\n    payload: { state: newState, id }\n  })\n}\n\nexport const closeSession = (id: string) => (dispatch: Dispatch) => {\n  dispatch({\n    type: CLOSE_SESSION,\n    payload: id\n  })\n}\n\nexport const acceptCall = (session: Session) => {\n  return { type: ACCEPT_CALL, payload: session }\n}\n\nexport const declineCall = (session: Session) => {\n  return { type: DECLINE_CALL, payload: session }\n}\n\nexport const endCall = (sessionId: string) => {\n  return { type: CLOSE_SESSION, payload: sessionId }\n}\n\nexport const holdCallRequest = (session: Session) => (dispatch: Dispatch) => {\n  if (!session.sessionDescriptionHandler || session.state !== SessionState.Established) {\n    return { type: SIPSESSION_HOLD_FAIL }\n  }\n  try {\n    session.invite({\n      sessionDescriptionHandlerModifiers: [\n        session.sessionDescriptionHandler!.holdModifier\n      ]\n    })\n    dispatch({ type: SIPSESSION_HOLD_REQUEST, payload: session.id })\n  } catch (err) {\n    dispatch({ type: SIPSESSION_HOLD_FAIL })\n  }\n  return\n}\n\n// maps thru onHold and sessions arrays looking for a call to put on hold before unHolding a call\nexport const unHoldCallRequest = (\n  session: Session,\n  onHolds: Array<any>,\n  sessions: Array<any>\n) => (dispatch: Dispatch) => {\n  // checks for  established sessions that are not on hold\n  for (const [sessionId, _session] of Object.entries(sessions)) {\n    if (onHolds.indexOf(sessionId) < 0 && sessionId !== session.id && _session.state === 'Established') {\n      // hold session if not on hold\n      try {\n        _session.invite({\n          sessionDescriptionHandlerModifiers: [\n            _session.sessionDescriptionHandler!.holdModifier\n          ]\n        })\n        dispatch({ type: SIPSESSION_HOLD_REQUEST, payload: _session.id })\n      } catch (err) {\n        dispatch({ type: SIPSESSION_HOLD_FAIL })\n      }\n    }\n  }\n  // unhold original session\n  try {\n    session.invite()\n    dispatch({ type: SIPSESSION_UNHOLD_REQUEST, payload: session.id })\n  } catch (err) {\n    dispatch({ type: SIPSESSION_UNHOLD_FAIL })\n  }\n}\n\nexport const blindTransferRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_REQUEST\n  })\n}\n\nexport const blindTransferSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_SUCCESS\n  })\n}\n\nexport const blindTransferFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_BLIND_TRANSFER_FAIL\n  })\n}\n\nexport const attendedTransferRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_REQUEST,\n  })\n}\n\nexport const attendedTransferCancel = (session: Session) => (\n  dispatch: Dispatch\n) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_CANCEL,\n    payload: session\n\n  })\n}\n\nexport const attendedTransferReady = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_READY\n  })\n}\n\nexport const attendedTransferPending = (session: Session) => (\n  dispatch: Dispatch\n) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_PENDING,\n    payload: session\n  })\n}\n\nexport const attendedTransferSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_SUCCESS\n  })\n}\nexport const attendedTransferFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_ATTENDED_TRANSFER_FAIL,\n  })\n}\n\nexport const muteRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_REQUEST\n  })\n}\n\nexport const muteSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_SUCCESS\n  })\n}\n\nexport const muteFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_MUTE_FAIL\n  })\n}\n\nexport const unMuteRequest = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_REQUEST\n  })\n}\n\nexport const unMuteSuccess = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_SUCCESS\n  })\n}\n\nexport const unMuteFail = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: SIPSESSION_UNMUTE_FAIL\n  })\n}\n","// eslint-disable-next-line no-unused-vars\nimport { PhoneConfig, AppConfig } from '../models'\n\nexport const SET_CREDENTIALS = 'SET_CREDENTIALS'\nexport const SET_PHONE_CONFIG = 'SET_PHONE_CONFIG'\nexport const SET_APP_CONFIG = 'SET_APP_CONFIG'\nexport const STRICT_MODE_SHOW_CALL_BUTTON = 'STRICT_MODE_SHOW_CALL_BUTTON'\nexport const STRICT_MODE_HIDE_CALL_BUTTON = 'STRICT_MODE_HIDE_CALL_BUTTON'\nexport const ATTENDED_TRANSFER_LIMIT_REACHED = 'ATTENDED_TRANSFER_LIMIT_REACHED'\nexport const SESSIONS_LIMIT_REACHED = 'SESSIONS_LIMIT_REACHED'\n\nexport const setCredentials = (uri: string = '', password: string = '') => {\n  return { type: SET_CREDENTIALS, payload: { uri, password } }\n}\n\nexport const setPhoneConfig = (config: PhoneConfig) => {\n  return { type: SET_PHONE_CONFIG, payload: config }\n}\n\nexport const setAppConfig = (config: AppConfig) => {\n  return { type: SET_APP_CONFIG, payload: config }\n}\n\nexport const setAppConfigStarted = () => {\n  return { type: STRICT_MODE_SHOW_CALL_BUTTON }\n}\n\nexport const setAppConfigCallEnded = () => {\n  return { type: STRICT_MODE_HIDE_CALL_BUTTON }\n}\n\nexport const attendedTransferLimitReached = () => {\n  return { type: ATTENDED_TRANSFER_LIMIT_REACHED }\n}\n\nexport const sessionsLimitReached = () => {\n  return { type: SESSIONS_LIMIT_REACHED }\n}\n","import { phoneStore } from '../index'\nimport {\n  SIPSESSION_HOLD_REQUEST,\n  holdCallRequest\n} from '../actions/sipSessions'\n\nexport const holdAll = (id: string) => {\n  const state = phoneStore.getState()\n  // @ts-ignore\n  const onHolds = state.sipSessions.onHold\n  // @ts-ignore\n  const sessions = state.sipSessions.sessions\n  for (const [sessionId, session] of Object.entries(sessions)) {\n    if (onHolds.indexOf(sessionId) < 0 && sessionId !== id) {\n      try {\n        // @ts-ignore\n        holdCallRequest(session)\n        // dispatch here because class is not connected to redux actions\n        phoneStore.dispatch({\n          type: SIPSESSION_HOLD_REQUEST,\n          // @ts-ignore\n          payload: session.id\n        })\n        return\n      } catch (err) {\n        return\n      }\n    }\n  }\n}\n\n\n","import { Dispatch } from 'redux'\n\nexport const AUDIO_INPUT_DEVICES_DETECTED = 'AUDIO_INPUT_DEVICES_DETECTED'\nexport const AUDIO_OUTPUT_DEVICES_DETECTED = 'AUDIO_OUTPUT_DEVICES_DETECTED'\n\nexport const REMOTE_AUDIO_CONNECTED = 'REMOTE_AUDIO_CONNECTED'\nexport const REMOTE_AUDIO_FAIL = 'REMOTE_AUDIO_FAIL'\n\nexport const LOCAL_AUDIO_CONNECTED = 'LOCAL_AUDIO_CONNECTED'\nexport const LOCAL_AUDIO_FAIL = 'REMOTE_AUDIO_FAIL'\n\nexport const SET_PRIMARY_OUTPUT = 'SET_PRIMARY_OUTPUT'\nexport const SET_PRIMARY_INPUT = 'SET_PRIMARY_INPUT'\n\nexport const SET_LOCAL_AUDIO_SESSIONS_PENDING = 'SET_LOCAL_AUDIO_SESSIONS_PENDING'\nexport const SET_LOCAL_AUDIO_SESSION_SUCCESS = 'SET_LOCAL_AUDIO_SESSION_SUCCESS'\nexport const SET_LOCAL_AUDIO_SESSION_FAIL = 'SET_LOCAL_AUDIO_SESSION_FAIL'\n\nexport const SET_REMOTE_AUDIO_SESSIONS_PENDING = 'SET_REMOTE_AUDIO_SESSIONS_PENDING'\nexport const SET_REMOTE_AUDIO_SESSION_SUCCESS = 'SET_REMOTE_AUDIO_SESSION_SUCCESS'\nexport const SET_REMOTE_AUDIO_SESSION_FAIL = 'SET_REMOTE_AUDIO_SESSION_FAIL'\n\nexport const AUDIO_SINKID_NOT_ALLOWED = 'AUDIO_SINKID_NOT_ALLOWED'\n\nexport const getInputAudioDevices = () => {\n  const inputArray: Array<Object> = []\n  navigator.mediaDevices\n    .enumerateDevices()\n    .then(function (devices: Array<Object>) {\n      devices.forEach(function (device: any) {\n        if (device.kind === 'audioinput') {\n          inputArray.push(device)\n        }\n      })\n    })\n  return {\n    type: AUDIO_INPUT_DEVICES_DETECTED,\n    payload: inputArray\n  }\n}\n\nexport const getOutputAudioDevices = () => {\n  const outputArray: Array<Object> = []\n  navigator.mediaDevices\n    .enumerateDevices()\n    .then(function (devices: Array<Object>) {\n      devices.forEach(function (device: any) {\n        if (device.kind === 'audiooutput') {\n          outputArray.push(device)\n        }\n      })\n    })\n  return {\n    type: AUDIO_OUTPUT_DEVICES_DETECTED,\n    payload: outputArray\n  }\n}\n\nexport const setPrimaryOutput = (deviceId: string, sessions: any) => (\n  dispatch: Dispatch\n) => {\n  if (sessions) {\n    if (Object.keys(sessions).length > 0) {\n      dispatch({\n        type: SET_REMOTE_AUDIO_SESSIONS_PENDING\n      })\n      for (const [sessionId, _session] of Object.entries(sessions)) {\n        // @ts-ignore\n        if (_session.state === 'Established') {\n          try {\n            const mediaElement = document.getElementById(sessionId)\n            const remoteStream = new MediaStream()\n            // @ts-ignore\n            _session.sessionDescriptionHandler.peerConnection\n              // check if session is established?\n              .getReceivers()\n              .forEach((receiver: any) => {\n                if (receiver.track) {\n                  remoteStream.addTrack(receiver.track)\n                }\n              })\n            if (mediaElement) {\n              // @ts-ignore\n              mediaElement.setSinkId(deviceId).then(() => {\n                // @ts-ignore\n                mediaElement.srcObject = remoteStream\n                // @ts-ignore\n                mediaElement.play()\n              })\n            } else {\n              console.log('no media Element')\n            }\n          } catch (err) {\n            console.log(err)\n            dispatch({\n              type: SET_REMOTE_AUDIO_SESSION_FAIL\n            })\n            return\n          }\n        }\n        dispatch({\n          type: SET_REMOTE_AUDIO_SESSION_SUCCESS\n        })\n      }\n    }\n  }\n  dispatch({\n    type: SET_PRIMARY_OUTPUT,\n    payload: deviceId\n  })\n}\n\nexport const setPrimaryInput = (\n  deviceId: string,\n  sessions: any,\n  sinkIdAllowed: boolean\n) => (dispatch: Dispatch) => {\n  if (sessions) {\n    if (Object.keys(sessions).length > 0) {\n      dispatch({\n        type: SET_LOCAL_AUDIO_SESSIONS_PENDING\n      })\n      for (const [sessionId, _session] of Object.entries(sessions)) {\n        // @ts-ignore\n        if (_session.state === 'Established') {\n          try {\n            // @ts-ignore\n            _session.sessionDescriptionHandler.peerConnection\n              .getSenders()\n              .forEach(function (sender: any) {\n                console.log(sessionId)\n                if (sender.track && sender.track.kind === 'audio') {\n                  const audioDeviceId = deviceId\n                  navigator.mediaDevices\n                    // @ts-ignore\n\n                    // creates a stream w track\n                    .getUserMedia({ audio: { deviceId: audioDeviceId } })\n                    .then(function (stream) {\n                      const audioTrack = stream.getAudioTracks()\n                      sender.replaceTrack(audioTrack[0])\n                    })\n                }\n              })\n          } catch (err) {\n            console.log(err)\n            dispatch({\n              type: SET_LOCAL_AUDIO_SESSION_FAIL\n            })\n            return\n          }\n        }\n        dispatch({\n          type: SET_LOCAL_AUDIO_SESSION_SUCCESS\n        })\n      }\n    }\n  }\n  dispatch({\n    type: SET_PRIMARY_INPUT,\n    payload: deviceId\n  })\n\n  // change remote audio for safari sessions\n  if (sinkIdAllowed === false) {\n    if (sessions) {\n      if (Object.keys(sessions).length > 0) {\n        for (const [sessionId, _session] of Object.entries(sessions)) {\n          // @ts-ignore\n          if (_session.state === 'Established') {\n            try {\n              const mediaElement = document.getElementById(sessionId)\n              const remoteStream = new MediaStream()\n              // @ts-ignore\n              _session.sessionDescriptionHandler.peerConnection\n                .getReceivers()\n                .forEach((receiver: any) => {\n                  if (receiver.track) {\n                    remoteStream.addTrack(receiver.track)\n                  }\n                })\n              if (mediaElement) {\n                // @ts-ignore\n                mediaElement.srcObject = remoteStream\n                // @ts-ignore\n                mediaElement.play()\n              } else {\n                console.log('no media Element')\n              }\n            } catch (err) {\n              console.log(err)\n              dispatch({\n                type: SET_REMOTE_AUDIO_SESSION_FAIL\n              })\n              return\n            }\n          }\n          dispatch({\n            type: SET_REMOTE_AUDIO_SESSION_SUCCESS\n          })\n        }\n      }\n    }\n  }\n}\n\nexport const sinkIdAllowed = () => (dispatch: Dispatch) => {\n  dispatch({\n    type: AUDIO_SINKID_NOT_ALLOWED\n  })\n}\n","import { phoneStore } from '../index'\nimport { Session } from 'sip.js'\n\nimport {\n  REMOTE_AUDIO_CONNECTED,\n  REMOTE_AUDIO_FAIL,\n  LOCAL_AUDIO_CONNECTED,\n  AUDIO_SINKID_NOT_ALLOWED\n} from '../actions/device'\n\n// adds track from getReceiver stream to <audio id={sessionId}> in Phone.tsx\nexport const setRemoteAudio = (session: Session) => {\n  console.log('setRemoteAudio')\n  const state = phoneStore.getState()\n  // @ts-ignore\n  const deviceId = state.device.primaryAudioOutput\n  const mediaElement = document.getElementById(session.id)\n  const remoteStream = new MediaStream()\n  // @ts-ignore\n  session.sessionDescriptionHandler.peerConnection\n    .getReceivers()\n    .forEach((receiver: any) => {\n      if (receiver.track.kind === 'audio') {\n        remoteStream.addTrack(receiver.track)\n      }\n    })\n\n  // checks for browser compatibility\n  // @ts-ignore\n  if (mediaElement && typeof mediaElement.sinkId === 'undefined') {\n    console.log('safari')\n    phoneStore.dispatch({\n      type: AUDIO_SINKID_NOT_ALLOWED\n    })\n    // @ts-ignore\n    mediaElement.srcObject = remoteStream\n    // @ts-ignore\n    mediaElement.play()\n\n    // @ts-ignore\n  } else if (mediaElement && typeof mediaElement.sinkId !== 'undefined') {\n    // @ts-ignore\n    mediaElement.setSinkId(deviceId).then(() => {\n      // @ts-ignore\n      mediaElement.srcObject = remoteStream\n      // @ts-ignore\n      mediaElement.play()\n    })\n  } else {\n    phoneStore.dispatch({\n      type: REMOTE_AUDIO_FAIL\n    })\n  }\n  phoneStore.dispatch({\n    type: REMOTE_AUDIO_CONNECTED\n  })\n}\n\n// creates new audio track then replaces audio track in getSender stream w/ new track\nexport const setLocalAudio = (session: Session) => {\n  const state = phoneStore.getState()\n  // @ts-ignore\n  const deviceId = state.device.primaryAudioInput\n  // @ts-ignore\n  session.sessionDescriptionHandler.peerConnection\n    .getSenders()\n    .forEach(function (sender: any) {\n      if (sender.track && sender.track.kind === 'audio') {\n        const audioDeviceId = deviceId\n        navigator.mediaDevices\n          .getUserMedia({ audio: { deviceId: audioDeviceId } })\n          .then(function (stream) {\n            const audioTrack = stream.getAudioTracks()\n            if (audioTrack) {\n              sender.replaceTrack(audioTrack[0])\n            }\n          })\n      }\n    })\n  phoneStore.dispatch({\n    type: LOCAL_AUDIO_CONNECTED\n  })\n}\n\nexport const cleanupMedia = (sessionId: string) => {\n  const mediaElement = document.getElementById(sessionId)\n  if (mediaElement) {\n    // @ts-ignore\n    mediaElement.srcObject = null\n    // @ts-ignore\n    mediaElement.pause()\n  }\n}\n","const Tone = require('tone');\n\nconst DTMF_MATRIX = {\n  1: [697, 1209],\n  2: [697, 1336],\n  3: [697, 1477],\n  A: [697, 1633],\n  4: [770, 1209],\n  5: [770, 1336],\n  6: [770, 1477],\n  B: [770, 1633],\n  7: [852, 1209],\n  8: [852, 1336],\n  9: [852, 1477],\n  C: [852, 1633],\n  0: [941, 1209],\n  '*': [941, 1336],\n  '#': [941, 1477],\n  D: [941, 1633]\n}\n\nconst Synth = Tone.PolySynth && new Tone.PolySynth(2, Tone.Synth)\nconst FMSynth = Tone.PolySynth && new Tone.PolySynth(2, Tone.FMSynth)\n\nexport const playDTMF = (key: any, deviceId: string) => {\n  const obj = DTMF_MATRIX[key]\n  if (!obj) {\n    console.log('invalid DTMF tone input')\n  }\n  Synth.volume.value = -10\n  Synth.set({\n    oscillator: {\n      type: 'sine'\n    },\n    envelope: {\n      attack: 0.02,\n      decay: 0.1,\n      sustain: 0.2,\n      release: 0.02\n    }\n  })\n\n  if (deviceId !== 'default') {\n    const mediaElement = document.getElementById('tone')\n    if (mediaElement) {\n      const dest = Tone.context.createMediaStreamDestination()\n      Synth.connect(dest)\n      // @ts-ignore\n      mediaElement.setSinkId(deviceId).then(() => {\n        // @ts-ignore\n        mediaElement.srcObject = dest.stream\n        // @ts-ignore\n        mediaElement.play()\n      })\n    }\n  } else {\n    Synth.toMaster()\n  }\n\n  Synth.triggerAttackRelease(obj, 0.3)\n}\n\nexport const callDisconnect = (deviceId: string) => {\n  FMSynth.triggerAttack(['C4', 'E4'], '+0.1')\n  FMSynth.triggerRelease(['C4', 'E4'], '+0.14')\n  FMSynth.triggerAttack(['D4', 'G4'], '+0.14')\n  FMSynth.triggerRelease(['D4', 'G4'], '+0.18')\n  if (deviceId !== 'default') {\n    const mediaElement = document.getElementById('tone')\n\n    if (mediaElement) {\n      const dest = Tone.context.createMediaStreamDestination()\n      Synth.connect(dest)\n      // @ts-ignore\n      mediaElement.setSinkId(deviceId).then(() => {\n        // @ts-ignore\n        mediaElement.srcObject = dest.stream\n        // @ts-ignore\n        mediaElement.play()\n      })\n    }\n  } else {\n    FMSynth.toMaster()\n  }\n}\n\nclass TonePlayer {\n  private loop: any\n\n  // get audio element, set srcObj to device, and play the track\n  ringtone = (deviceId: string) => {\n    const mediaElement = document.getElementById('ringtone')\n    if (deviceId !== 'default') {\n      if (mediaElement) {\n        // @ts-ignore\n        mediaElement.setSinkId(deviceId).then(() => {\n          // @ts-ignore\n          mediaElement.play()\n        })\n      } else {\n        console.log('no media Element')\n      }\n    } else {\n      // @ts-ignore\n      mediaElement.play()\n    }\n  }\n\n  ringback = (deviceId: string) => {\n    const dest = Tone.context.createMediaStreamDestination()\n    console.log(dest)\n    Synth.set({\n      oscillator: {\n        type: 'sine'\n      },\n      envelope: {\n        attack: 0.02,\n        decay: 0.1,\n        sustain: 0.2,\n        release: 0.02\n      }\n    }).connect(dest)\n    if (deviceId !== 'default') {\n      const mediaElement = document.getElementById('tone')\n      if (mediaElement) {\n        const dest = Tone.context.createMediaStreamDestination()\n        Synth.connect(dest)\n        // @ts-ignore\n        mediaElement.setSinkId(deviceId).then(() => {\n          // @ts-ignore\n          mediaElement.srcObject = dest.stream\n          // @ts-ignore\n          mediaElement.play()\n        })\n      }\n    } else {\n      Synth.toMaster()\n    }\n\n    this.loop = new Tone.Loop((time: any) => {\n      Synth.triggerAttack([440, 480])\n      Synth.triggerRelease([440, 480], time + 2)\n    }, 6)\n    this.loop.start(0)\n    Tone.Transport.start()\n  }\n\n  stop() {\n    if (this.loop) {\n      try {\n        this.loop.stop(0)\n      } catch {\n        console.log('no loop to stop')\n      }\n    }\n\n    if (Tone.Transport) {\n      try {\n        Tone.Transport.stop()\n        Synth.triggerRelease([440, 480])\n      } catch {\n        console.log('no tone to stop')\n      }\n    }\n\n    const mediaElement = document.getElementById('ringtone')\n    if (mediaElement) {\n      // @ts-ignore\n      const promise = mediaElement.pause()\n      if (promise !== undefined) {\n        promise\n          .catch((error: any) => {\n            console.log(error)\n          })\n          .then(() => {\n            console.log('ringtone stopped')\n          })\n      }\n    }\n  }\n}\n\nexport default TonePlayer\n","import TonePlayer from './TonePlayer'\nimport { phoneStore } from '../index'\n\nclass ToneManager {\n  currentTone: any\n\n  playRing(type: string) {\n    const state = phoneStore.getState()\n    // @ts-ignore\n    const deviceId = state.device.primaryAudioOutput\n    if (this.currentTone) {\n      this.currentTone.stop()\n      this.currentTone = undefined\n    }\n    if (type === 'ringback') {\n      this.currentTone = new TonePlayer()\n      this.currentTone.ringback(deviceId)\n    } else if (type == 'ringtone') {\n      this.currentTone = new TonePlayer()\n      this.currentTone.ringtone(deviceId)\n    }\n  }\n\n  stopAll() {\n    if (this.currentTone) {\n      this.currentTone.stop()\n      this.currentTone = undefined\n    }\n  }\n}\n\nconst toneManager = new ToneManager()\nexport default toneManager\n","import { phoneStore } from '../index'\nimport { SessionState, Session, UserAgent} from 'sip.js'\nimport { Transport as WebTransport } from \"sip.js/lib/platform/web/transport\";\nimport { SIPSESSION_STATECHANGE, CLOSE_SESSION } from '../actions/sipSessions'\nimport { STRICT_MODE_SHOW_CALL_BUTTON } from '../actions/config'\nimport { holdAll } from '../util/hold'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from './audio'\nimport toneManager from './ToneManager'\n\nexport interface SessionStateHandlerParams {\n  onSessionEstablishing?(): void\n  onSessionEstablished?(): void\n  onSessionTerminating?(): void\n  onSessionTerminated?(): void\n}\n\nexport class SessionStateHandler {\n  private session: Session\n  private ua: UserAgent\n  private onSessionEstablishing?(): void\n  private onSessionEstablished?(): void\n  private onSessionTerminating?(): void\n  private onSessionTerminated?(): void\n\n  constructor(session: Session, ua: UserAgent, params: SessionStateHandlerParams = {}) {\n    this.session = session\n    this.ua = ua\n    this.onSessionEstablishing = params.onSessionEstablishing\n    this.onSessionEstablished = params.onSessionEstablished\n    this.onSessionTerminating = params.onSessionTerminating\n    this.onSessionTerminated = params.onSessionTerminated\n  }\n\n  public stateChange = (newState: SessionState) => {\n    switch (newState) {\n      case SessionState.Establishing:\n        holdAll(this.session.id)\n        toneManager.playRing('ringback')\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n\n        // check if session recieves a BYE message while sessionstate is establishing\n        const myTransport = this.ua.transport as WebTransport\n        myTransport.on('message', (message: string) => {\n          if (message.includes('BYE ') && message.indexOf('BYE ') === 0) {\n            if (this.session.state === 'Establishing') {\n              console.log(\n                `${message} session has recieved a BYE message when the session state is establishing`\n              )\n              // @ts-ignore\n              this.session.cancel()\n              this.session.dispose()\n              setTimeout(() => {\n                phoneStore.dispatch({\n                  type: CLOSE_SESSION,\n                  payload: this.session.id\n                })\n                toneManager.stopAll()\n                phoneStore.dispatch({\n                  type: STRICT_MODE_SHOW_CALL_BUTTON\n                })\n              }, 5000)\n              if (this.onSessionEstablishing) {\n                this.onSessionEstablishing()\n              }\n              return\n            } else {\n              return\n            }\n          }\n        })\n        break\n      case SessionState.Established:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        toneManager.stopAll()\n        setLocalAudio(this.session)\n        setRemoteAudio(this.session)\n        if (this.onSessionEstablished) {\n          this.onSessionEstablished()\n        }\n        break\n      case SessionState.Terminating:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        toneManager.stopAll()\n        cleanupMedia(this.session.id)\n        if (this.onSessionTerminating) {\n          this.onSessionTerminating()\n        }\n        break\n      case SessionState.Terminated:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        setTimeout(() => {\n          phoneStore.dispatch({\n            type: CLOSE_SESSION,\n            payload: this.session.id\n          })\n          toneManager.stopAll()\n          phoneStore.dispatch({\n            type: STRICT_MODE_SHOW_CALL_BUTTON\n          })\n        }, 5000)\n        if (this.onSessionTerminated) {\n          this.onSessionTerminated()\n        }\n        break\n      default:\n        console.log(`Unknown session state change: ${newState}`)\n        break\n    }\n  }\n}\n\nexport const getFullNumber = (number: string) => {\n  if (number.length < 10) {\n    return number\n  }\n\n  // @ts-ignore\n  const defaultCountryCode = phoneStore.getState().sipAccounts.sipAccount._config.defaultCountryCode;\n\n  let fullNumber = number.startsWith('+') ? number : `+${number}`\n\n  if (number.startsWith(defaultCountryCode)) {\n    fullNumber = `+${number}`\n  } else if (defaultCountryCode === '7' && number.startsWith('8')) {\n    fullNumber = `+${number.replace('8', '7')}`\n  } else if (defaultCountryCode) {\n    fullNumber = `+${defaultCountryCode}${number}`\n  }\n\n  console.log('fullNumber:', fullNumber)\n  return fullNumber\n}\n\nexport const statusMask = (status: string) => {\n  switch (status) {\n    case 'Established':\n      return 'Соединение'\n    case 'Establishing':\n      return 'Звонок...'\n    case 'Initial':\n      return 'Инициализирован'\n    case 'Terminating':\n    case 'Terminated':\n      return 'Завершен'\n    default:\n      return `Неизвестный статус: ${status}`\n  }\n}\n\nexport const getDurationDisplay = (duration: number) => {\n  let minutes = Math.floor(duration / 60)\n  const hours = Math.floor(minutes / 60)\n  minutes = minutes % 60\n  const seconds = duration % 60\n  let dh, dm, ds\n  if (hours && hours < 10) {\n    dh = `0${hours}:`\n  } else if (hours) {\n    dh = `${hours}:`\n  } else {\n    dh = '00:'\n  }\n  if (minutes && minutes < 10) {\n    dm = `0${minutes}:`\n  } else if (minutes) {\n    dm = `${minutes}:`\n  } else {\n    dm = '00:'\n  }\n  if (seconds && seconds < 10) {\n    ds = `0${seconds}`\n  } else if (seconds) {\n    ds = `${seconds}`\n  } else {\n    ds = '00'\n  }\n  return `${hours ? dh : ''}${dm}${ds}`\n}\n","import { phoneStore } from '../index'\nimport { SessionState, Session } from 'sip.js'\nimport { SIPSESSION_STATECHANGE, CLOSE_SESSION } from '../actions/sipSessions'\nimport { holdAll } from '../util/hold'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from './audio'\n\nexport class IncomingSessionStateHandler {\n  private incomingSession: Session\n  constructor(incomingSession: Session) {\n    this.incomingSession = incomingSession\n  }\n\n  public stateChange = (newState: SessionState) => {\n    switch (newState) {\n      case SessionState.Establishing:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        break\n      case SessionState.Established:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        holdAll(this.incomingSession.id)\n        setLocalAudio(this.incomingSession)\n        setRemoteAudio(this.incomingSession)\n        break\n      case SessionState.Terminating:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        cleanupMedia(this.incomingSession.id)\n        break\n      case SessionState.Terminated:\n        phoneStore.dispatch({\n          type: SIPSESSION_STATECHANGE\n        })\n        setTimeout(() => {\n          phoneStore.dispatch({\n            type: CLOSE_SESSION,\n            payload: this.incomingSession.id\n          })\n        }, 5000)\n        break\n      default:\n        console.log(`Unknown session state change: ${newState}`)\n        break\n    }\n  }\n}\n","import {\n  Inviter,\n  Invitation,\n  Referral,\n  Registerer,\n  RegistererState,\n  RegistererOptions,\n  Session,\n  UserAgent,\n  UserAgentOptions\n} from 'sip.js'\n\nimport { TransportOptions } from 'sip.js/lib/platform/web'\nimport { phoneStore } from '../index'\nimport { NEW_USERAGENT } from '../actions/sipAccounts'\nimport { SessionStateHandler, getFullNumber } from '../util/sessions'\nimport { IncomingSessionStateHandler } from '../util/incomingSession'\nimport { STRICT_MODE_HIDE_CALL_BUTTON, SESSIONS_LIMIT_REACHED } from '../actions/config'\nimport { NEW_SESSION, INCOMING_CALL } from '../actions/sipSessions'\nimport { SipConfig, SipCredentials } from '../models'\n\nexport default class SIPAccount {\n  public _config: SipConfig\n  public _credentials: SipCredentials\n  public _userAgent: any\n  public _registerer: any\n\n  constructor(sipConfig: SipConfig, sipCredentials: SipCredentials) {\n    this._config = sipConfig\n    this._credentials = sipCredentials\n    const uri = UserAgent.makeURI('sip:' + sipCredentials.sipuri)\n    if (!uri) {\n      throw new Error('Failed to create URI')\n    }\n    const transportOptions: TransportOptions = {\n      server: sipConfig.websocket\n    }\n    const userAgentOptions: UserAgentOptions = {\n      autoStart: false,\n      autoStop: true,\n      noAnswerTimeout: sipConfig.noAnswerTimeout || 30,\n      logBuiltinEnabled: process.env.NODE_ENV !== 'production',\n      logConfiguration: process.env.NODE_ENV !== 'production',\n      logLevel: process.env.NODE_ENV !== 'production' ? 'debug' : 'error',\n      authorizationPassword: sipCredentials.password,\n      userAgentString: 'OTF-react-sip-phone',\n      hackWssInTransport: true,\n      transportOptions,\n      uri,\n      sessionDescriptionHandlerFactoryOptions: {\n        constraints: {\n          audio: {\n            deviceId: 'default'\n          },\n          video: false\n        },\n        alwaysAcquireMediaFirst: true,\n        iceCheckingTimeout: 500\n      }\n    }\n    const registererOptions: RegistererOptions = {\n      expires: 300,\n      logConfiguration: process.env.NODE_ENV !== 'production'\n    }\n\n    // check here for register\n    this._userAgent = new UserAgent(userAgentOptions)\n    this._registerer = new Registerer(this._userAgent, registererOptions)\n    this.setupDelegate() // Delegate is what handles incoming calls\n    this._userAgent.start().then(() => {\n      this._registerer.register()\n      this.setupRegistererListener()\n      // Push ua to store\n      phoneStore.dispatch({ type: NEW_USERAGENT, payload: this._userAgent })\n    })\n  }\n\n  setupDelegate() {\n    this._userAgent.delegate = {\n      onInvite(invitation: Invitation): void {\n        // An Invitation is a Session\n        const incomingSession: Session = invitation\n\n        // Setup incoming session delegate\n        incomingSession.delegate = {\n          // Handle incoming REFER request.\n          onRefer(referral: Referral): void {\n            console.log(referral)\n          }\n        }\n\n        phoneStore.dispatch({ type: INCOMING_CALL, payload: incomingSession })\n\n        const stateHandler = new IncomingSessionStateHandler(incomingSession)\n        // Handle incoming session state changes.\n        incomingSession.stateChange.addListener(stateHandler.stateChange)\n      }\n    }\n  }\n\n  setupRegistererListener() {\n    this._registerer.stateChange.addListener((newState: RegistererState) => {\n      switch (newState) {\n        case RegistererState.Initial:\n          console.log('The user registration has initialized  ')\n          break\n        case RegistererState.Registered:\n          console.log('The user is registered ')\n          break\n        case RegistererState.Unregistered:\n          console.log('The user is unregistered ')\n          break\n        case RegistererState.Terminated:\n          console.log('The user is terminated ')\n          break\n      }\n    })\n  }\n\n  makeCall(number: string) {\n    const state = phoneStore.getState()\n    // @ts-ignore\n    const sessionsLimit: number = state.config.phoneConfig.sessionsLimit\n    // @ts-ignore\n    const sessionsActiveObject: Object = state.sipSessions.sessions\n    // @ts-ignore\n    const strictMode: string = state.config.appConfig.mode\n    // @ts-ignore\n    const attendedTransfersActive: number = state.sipSessions.attendedTransfers.length\n\n    // added sessionsLimit check if outside Application makes call using sipaccount w/o using dialstring\n    const sessionsActive: number = Object.keys(sessionsActiveObject).length\n    const sessionDiff: number = sessionsActive - attendedTransfersActive\n    if (sessionDiff >= sessionsLimit) {\n      phoneStore.dispatch({ type: SESSIONS_LIMIT_REACHED })\n    } else {\n      // Make a call\n      const target = UserAgent.makeURI(\n        `sip:${getFullNumber(number)}@${this._credentials.sipuri.split('@')[1]};user=phone`\n      )\n      // strict mode will remove dialstring call button on session initialization\n      if (strictMode === ('strict')) {\n        phoneStore.dispatch({ type: STRICT_MODE_HIDE_CALL_BUTTON })\n      }\n\n      if (target) {\n        console.log(`Calling ${number}`)\n        const inviter = new Inviter(this._userAgent, target)\n        // An Inviter is a Session\n        const outgoingSession: Session = inviter\n        // Setup outgoing session delegate\n        outgoingSession.delegate = {\n          // Handle incoming REFER request.\n          onRefer(referral: Referral): void {\n            // TODO\n            console.log('Referred: ' + referral)\n          }\n        }\n        phoneStore.dispatch({ type: NEW_SESSION, payload: outgoingSession })\n        // Handle outgoing session state changes.\n        const stateHandler = new SessionStateHandler(\n          outgoingSession,\n          this._userAgent,\n          {\n            ...this._config\n          }\n        )\n        outgoingSession.stateChange.addListener(stateHandler.stateChange)\n        outgoingSession\n          .invite()\n          .then(() => {\n            console.log('Invite sent!')\n          })\n          .catch((error: Error) => {\n            console.log(error)\n          })\n\n        if (this._config.onStartNewSession) {\n          this._config.onStartNewSession()\n        }\n      } else {\n        console.log(`Failed to establish outgoing call session to ${number}`)\n      }\n    }\n\n    // toneManager.playRing('ringback')\n  }\n\n  listener() {}\n}\n","import * as React from 'react'\nimport { SipConfig, SipCredentials, PhoneConfig, AppConfig } from './models'\nimport SIPAccount from './lib/SipAccount'\nimport { connect } from 'react-redux'\nimport { setNewAccount } from './actions/sipAccounts'\nimport { setPhoneConfig, setCredentials, setAppConfig } from  './actions/config'\n\n// Wrapper component to do any initialization of the Sip connection.\n\ninterface Props {\n  sipCredentials: SipCredentials\n  sipConfig: SipConfig\n  phoneConfig: PhoneConfig\n  appConfig: AppConfig\n  setNewAccount: Function\n  setPhoneConfig: Function\n  setCredentials: Function\n  setAppConfig: Function\n  children: any\n}\n\nclass SipWrapper extends React.Component<Props> {\n  componentDidMount() {\n    console.log('mounted')\n    if (this.props.sipCredentials.password) {\n      this.initializeSip()\n    }\n  }\n\n  initializeSip() {\n    const account = new SIPAccount(\n      this.props.sipConfig,\n      this.props.sipCredentials\n    )\n    this.props.setNewAccount(account)\n    this.props.setPhoneConfig(this.props.phoneConfig)\n    this.props.setAppConfig(this.props.appConfig)\n  }\n\n  render() {\n    return <React.Fragment>{this.props.children}</React.Fragment>\n  }\n}\nconst mapStateToProps = () => ({})\nconst actions = {\n  setNewAccount,\n  setPhoneConfig,\n  setCredentials,\n  setAppConfig\n}\nexport default connect(mapStateToProps, actions)(SipWrapper)","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  setPrimaryInput,\n  setPrimaryOutput,\n  getInputAudioDevices,\n  getOutputAudioDevices\n} from '../actions/device'\nimport styles from './Status.scss'\nimport Select from 'react-select'\n// eslint-disable-next-line no-unused-vars\nimport { PhoneConfig, AppConfig } from '../models'\n\nconst settingsIcon = require('./assets/settings-24px.svg')\nconst micIcon = require('./assets/mic-24px.svg')\nconst soundIcon = require('./assets/volume_up-24px.svg')\n\ninterface Props {\n  phoneConfig: PhoneConfig\n  appConfig: AppConfig\n  name: string\n  inputs: any\n  outputs: any\n  primaryInput: string\n  primaryOutput: string\n  setPrimaryInput: Function\n  setPrimaryOutput: Function\n  getInputAudioDevices: Function\n  getOutputAudioDevices: Function\n  sessions: any\n  sinkIdAllowed: boolean\n}\n\nclass Status extends React.Component<Props> {\n  state = { settingsMenu: false }\n\n  componentDidMount() {\n    this.props.getInputAudioDevices()\n    this.props.getOutputAudioDevices()\n  }\n\n  mapOptions(options: any) {\n    const list: any = []\n    options.map((option: any) => {\n      list.push({ value: option.deviceId, label: option.label })\n    })\n    return list\n  }\n\n  handleChangeDevice(type: string, id: string) {\n    if (type === 'out') {\n      this.props.setPrimaryOutput(id, this.props.sessions)\n    } else {\n      this.props.setPrimaryInput(\n        id,\n        this.props.sessions,\n        this.props.sinkIdAllowed\n      )\n    }\n  }\n\n  render() {\n    const { props, state } = this\n    const inputs = this.mapOptions(props.inputs)\n    const outputs = this.mapOptions(props.outputs)\n    return (\n      <React.Fragment>\n        <div className={styles.container}>\n          {props.appConfig.appSize === 'large' ? (\n            <div className={styles.userStringLarge}>{props.name}</div>\n          ) : (\n            <div className={styles.userString}>{props.name}</div>\n          )}\n          {props.phoneConfig.disabledFeatures.includes('settings') ? null :(\n            <div\n              id={styles.settingsButton}\n              className={state.settingsMenu ? styles.on : ''}\n              onClick={() =>\n                this.setState({ settingsMenu: !state.settingsMenu })\n              }\n            >\n              <img src={settingsIcon} />\n            </div>\n          )}\n        </div>\n        {props.phoneConfig.disabledFeatures.includes('settings') ? null :\n          <div\n            id={styles.settingsMenu}\n            className={state.settingsMenu ? '' : styles.closed}\n          >\n            <hr style={{ width: '100%' }} />\n            <div className={styles.dropdownRow}>\n              <img className={styles.dropdownIcon} src={soundIcon} />\n              <Select\n                placeholder='Выберете канал выхода'\n                value={\n                  outputs.find(\n                    (output: any) => output.value === props.primaryOutput\n                  ) || null\n                }\n                onChange={(option) =>\n                  this.handleChangeDevice('out', option.value)\n                }\n                options={outputs}\n                id={styles.dropdowns}\n              />\n            </div>\n            <div className={styles.dropdownRow}>\n              <img className={styles.dropdownIcon} src={micIcon} />\n              <Select\n                placeholder='Выберете канал входа'\n                value={inputs.find(\n                  (input: any) => input.value === props.primaryInput\n                )}\n                onChange={(option) =>\n                  this.handleChangeDevice('in', option.value)\n                }\n                options={inputs}\n                id={styles.dropdowns}\n              />\n            </div>\n            <hr style={{ width: '100%' }} />\n          </div>\n        }\n\n      </React.Fragment>\n    )\n  }\n}\nconst mapStateToProps = (state: any) => ({\n  inputs: state.device.audioInput,\n  outputs: state.device.audioOutput,\n  primaryInput: state.device.primaryAudioInput,\n  primaryOutput: state.device.primaryAudioOutput,\n  sessions: state.sipSessions.sessions,\n  sinkIdAllowed: state.device.sinkId\n})\n\nconst actions = {\n  setPrimaryInput,\n  setPrimaryOutput,\n  getInputAudioDevices,\n  getOutputAudioDevices\n}\n\nexport default connect(mapStateToProps, actions)(Status)\n","import * as React from 'react'\nimport styles from './Phone.scss'\n\ninterface Props {\n  text: string\n  click: Function\n  letters: string\n}\n\nconst DialButton = ({ text, click, letters }: Props) => {\n  return (\n    <div\n      id='sip-dial-button'\n      className={styles.dialpadButton}\n      onClick={() => click()}\n    >\n      {text}\n      <div\n        style={{ opacity: letters === '1' ? 0 : 1 }}\n        className={styles.dialpadButtonLetters}\n      >\n        {letters}\n      </div>\n    </div>\n  )\n}\n\nexport default DialButton\n","export const getButtonLetters = (value: string) => {\n  switch (value) {\n    case '1':\n      return '1'\n    case '2':\n      return 'ABC'\n    case '3':\n      return 'DEF'\n    case '4':\n      return 'GHI'\n    case '5':\n      return 'JKL'\n    case '6':\n      return 'MNO'\n    case '7':\n      return 'PQRS'\n    case '8':\n      return 'TUV'\n    case '9':\n      return 'WXYZ'\n    case '0':\n      return '+'\n    default:\n      return ''\n  }\n}\n","import * as React from 'react'\nimport { connect } from 'react-redux'\n\nimport styles from './Phone.scss'\nimport DialButton from './DialButton'\nimport { Session, SessionState } from 'sip.js'\nimport { getButtonLetters } from '../../util/buttons'\nimport { playDTMF } from '../../util/TonePlayer'\n\ninterface Props {\n  open: boolean\n  session?: Session\n  deviceId?: string\n  onButtonClick?(value: string): void\n}\n\nclass Dialpad extends React.Component<Props> {\n  topRow: any = []\n  middleRow: any = []\n  bottomRow: any = []\n\n  constructor(props: Props) {\n    super(props)\n    for (let x = 1; x < 4; x++) {\n      this.topRow.push(this.getButton(x.toString()))\n    }\n    for (let x = 4; x < 7; x++) {\n      this.middleRow.push(this.getButton(x.toString()))\n    }\n    for (let x = 7; x < 10; x++) {\n      this.bottomRow.push(this.getButton(x.toString()))\n    }\n  }\n\n  getButton(value: string) {\n    return (\n      <DialButton\n        key={value}\n        text={value}\n        letters={getButtonLetters(value)}\n        click={() => this.handleClick(value)}\n      />\n    )\n  }\n\n  handleClick(value: string) {\n    const { session, onButtonClick, deviceId } = this.props\n    if (!!session && !!deviceId && session.state === SessionState.Established) {\n      this.sendDTMF(value)\n      playDTMF(value, deviceId)\n    } else if (!!onButtonClick) {\n      onButtonClick(value)\n    }\n  }\n\n  sendDTMF(value: string) {\n    const options = {\n      requestOptions: {\n        body: {\n          contentDisposition: 'render',\n          contentType: 'application/dtmf-relay',\n          content: `Signal=${value}\\r\\nDuration=1000`\n        }\n      }\n    }\n    this.props.session!.info(options)\n  }\n\n  render() {\n    return (\n      <div className={this.props.open ? '' : styles.closed} id={styles.dialpad}>\n        <div className={styles.dialpadRow}>{this.topRow}</div>\n        <div className={styles.dialpadRow}>{this.middleRow}</div>\n        <div className={styles.dialpadRow}>{this.bottomRow}</div>\n        <div className={styles.dialpadRow}>\n          {this.getButton('*')}\n          {this.getButton('0')}\n          {this.getButton('#')}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  deviceId: state.device.primaryAudioOutput\n})\nconst actions = {}\nexport default connect(mapStateToProps, actions)(Dialpad)\n\nexport type { Props as DialpadProps }\nexport { Dialpad as DialpadComponent }\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport styles from './Phone.scss'\n// eslint-disable-next-line no-unused-vars\nimport { Session, UserAgent } from 'sip.js'\nimport { holdCallRequest, unHoldCallRequest } from '../../actions/sipSessions'\n\nconst holdIcon = require('./assets/phone_paused-24px.svg')\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  holdCallRequest: Function\n  unHoldCallRequest: Function\n  onHold: Array<Object>\n  sessions: Array<Object>\n}\n\nclass Hold extends React.Component<Props> {\n  hold() {\n    if (this.checkHoldState()) {\n      this.props.unHoldCallRequest(\n        this.props.session,\n        this.props.onHold,\n        this.props.sessions\n      )\n    } else {\n      this.props.holdCallRequest(this.props.session)\n    }\n  }\n\n  checkHoldState() {\n    return this.props.onHold.includes(this.props.session.id)\n  }\n\n  render() {\n    return (\n      <button\n        className={this.checkHoldState() ? styles.on : ''}\n        id={styles.actionButton}\n        onClick={() => this.hold()}\n      >\n        <img src={holdIcon} />\n      </button>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  onHold: state.sipSessions.onHold\n})\nconst actions = {\n  holdCallRequest,\n  unHoldCallRequest\n}\n\nexport default connect(mapStateToProps, actions)(Hold)\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport styles from './Phone.scss'\nimport { Session, SessionState, UserAgent } from 'sip.js'\n\nimport {\n  muteRequest,\n  muteSuccess,\n  muteFail,\n  unMuteRequest,\n  unMuteSuccess,\n  unMuteFail\n} from '../../actions/sipSessions'\n\nconst micOffIcon = require('./assets/mic_off-24px.svg')\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  muteRequest: Function\n  muteSuccess: Function\n  muteFail: Function\n  unMuteRequest: Function\n  unMuteSuccess: Function\n  unMuteFail: Function\n}\n\nclass Mute extends React.Component<Props> {\n  state = {\n    onMute: false\n  }\n\n  mute() {\n    if (this.state.onMute) {\n      this.props.unMuteRequest()\n      return new Promise((resolve, reject) => {\n        if (\n          !this.props.session.sessionDescriptionHandler ||\n          this.props.session.state !== SessionState.Established\n        ) {\n          this.props.unMuteFail()\n          reject('No session to mute')\n          return\n        }\n        try {\n          const pc =\n            // @ts-ignore\n            this.props.session.sessionDescriptionHandler!.peerConnection\n          pc.getSenders().forEach(function (stream: any) {\n            if (stream.track && stream.track.kind === 'audio') {\n              stream.track.enabled = true\n            }\n          })\n          this.props.unMuteSuccess()\n          this.setState({ onMute: false })\n          resolve()\n          return\n        } catch (err) {\n          this.props.unMuteFail()\n          reject(err)\n        }\n      })\n    }\n\n    if (!this.state.onMute) {\n      return new Promise((resolve, reject) => {\n        if (\n          !this.props.session.sessionDescriptionHandler ||\n          this.props.session.state !== SessionState.Established\n        ) {\n          this.props.muteFail()\n          reject('No session to mute')\n          return\n        }\n        try {\n          this.props.muteRequest()\n          const pc =\n            // @ts-ignore\n            this.props.session.sessionDescriptionHandler!.peerConnection\n          console.log(pc.getSenders())\n          pc.getSenders().forEach(function (stream: any) {\n            if (stream.track && stream.track.kind === 'audio') {\n              stream.track.enabled = false\n            }\n          })\n          this.props.muteSuccess()\n          this.setState({ onMute: true })\n          resolve()\n          return\n        } catch (err) {\n          this.props.muteFail()\n          reject(err)\n          return\n        }\n      })\n    }\n    this.props.muteFail()\n    return\n  }\n\n  render() {\n    return (\n      <div\n        className={this.state.onMute ? styles.on : ''}\n        id={styles.actionButton}\n        onClick={() => this.mute()}\n      >\n        <img src={micOffIcon} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent\n})\nconst actions = {\n  muteRequest,\n  muteSuccess,\n  muteFail,\n  unMuteRequest,\n  unMuteSuccess,\n  unMuteFail\n}\n\nexport default connect(mapStateToProps, actions)(Mute)\n","import * as React from 'react'\nimport { connect } from 'react-redux'\n\nimport styles from './Phone.scss'\n\nimport { Session, UserAgent } from 'sip.js'\nimport {\n  blindTransferRequest,\n  blindTransferSuccess,\n  blindTransferFail\n} from '../../actions/sipSessions'\nimport { getFullNumber } from '../../util/sessions'\nimport SIPAccount from '../../lib/SipAccount'\n\nconst blindIcon = require('./assets/arrow_forward-24px.svg')\n\ninterface Props {\n  session: Session\n  sipAccount: SIPAccount\n  userAgent: UserAgent\n  destination: string\n  blindTransferRequest: Function\n  blindTransferSuccess: Function\n  blindTransferFail: Function\n}\n\nclass BlindTransfer extends React.Component<Props> {\n  blindTransferCall() {\n    this.props.blindTransferRequest()\n    const target = UserAgent.makeURI(\n      `sip:${getFullNumber(this.props.destination)}@${this.props.sipAccount._credentials.sipuri.split('@')[1]};user=phone`\n    )\n    if (target) {\n      try {\n        this.props.session.refer(target)\n        this.props.blindTransferSuccess()\n      } catch (err) {\n        console.log(err)\n      }\n    } else {\n      this.props.blindTransferFail()\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <button\n          className={styles.transferButtons}\n          onClick={() => this.blindTransferCall()}\n        >\n          <img src={blindIcon} />\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent\n})\nconst actions = {\n  blindTransferRequest,\n  blindTransferSuccess,\n  blindTransferFail\n}\n\nexport default connect(mapStateToProps, actions)(BlindTransfer)\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport { phoneStore } from '../../index'\nimport { PhoneConfig } from '../../models'\nimport styles from './Phone.scss'\nimport { Session, SessionState, UserAgent, Inviter } from 'sip.js'\nimport {\n  NEW_ATTENDED_TRANSFER,\n  attendedTransferRequest,\n  attendedTransferCancel,\n  attendedTransferReady,\n  attendedTransferPending,\n  attendedTransferSuccess,\n  attendedTransferFail,\n  holdCallRequest,\n  stateChange,\n  closeSession\n} from '../../actions/sipSessions';\nimport {attendedTransferLimitReached} from '../../actions/config'\nimport Phone from './Phone'\nimport { getFullNumber } from '../../util/sessions'\nimport { setLocalAudio, setRemoteAudio, cleanupMedia } from '../../util/audio'\nimport SIPAccount from '../../lib/SipAccount'\n\nconst attendedIcon = require('./assets/phone_in_talk-24px.svg')\nconst cancelIcon = require('./assets/call_end-24px.svg')\nconst connectIcon = require('./assets/arrow_forward-24px.svg')\n\ninterface Props {\n  session: Session\n  sipAccount: SIPAccount\n  userAgent: UserAgent\n  destination: string\n  started: Function\n  attendedTransferRequest: Function\n  attendedTransferCancel: Function\n  attendedTransferReady: Function\n  attendedTransferPending: Function\n  attendedTransferSuccess: Function\n  attendedTransferFail: Function\n  attendedTransferLimitReached: Function\n  holdCallRequest: Function\n  stateChange: Function\n  closeSession: Function\n  attendedTransfersList: Array<string>\n  phoneConfig: PhoneConfig\n}\n\nclass AttendedTransfer extends React.Component<Props> {\n  state = {\n    attendedTransferSessionPending: null,\n    attendedTransferSessionReady: null\n  }\n\n  attendedTransferCall() {\n    // check amount of attendedTranfers with phoneConfig\n    if (this.props.attendedTransfersList.length >= this.props.phoneConfig.attendedTransferLimit){\n      this.props.attendedTransferLimitReached()\n    } else {\n      this.holdAll()\n      this.props.attendedTransferRequest()\n      const target = UserAgent.makeURI(\n        `sip:${getFullNumber(this.props.destination)}@${\n          this.props.sipAccount._credentials.sipuri.split('@')[1]\n        };user=phone`\n      )\n      if (target) {\n        const inviter = new Inviter(this.props.userAgent, target)\n        const outgoingSession: Session = inviter\n        phoneStore.dispatch({\n          type: NEW_ATTENDED_TRANSFER,\n          payload: outgoingSession\n        })\n        this.setState({ attendedTransferSessionPending: outgoingSession })\n\n        outgoingSession.stateChange.addListener((newState: SessionState) => {\n          switch (newState) {\n            case SessionState.Initial:\n            case SessionState.Establishing:\n              this.props.stateChange(newState, outgoingSession.id)\n              // add new session to local state\n              this.props.attendedTransferPending()\n\n              break\n            case SessionState.Established:\n              this.setState({ attendedTransferSessionReady: outgoingSession })\n              this.props.attendedTransferReady()\n\n              this.setState({ attendedTransferSessionPending: false })\n              this.props.stateChange(newState, outgoingSession.id)\n\n              setLocalAudio(outgoingSession)\n              setRemoteAudio(outgoingSession)\n\n              break\n            case SessionState.Terminating:\n              this.props.stateChange(newState, outgoingSession.id)\n              cleanupMedia(outgoingSession.id)\n              break\n            case SessionState.Terminated:\n              this.props.stateChange(newState, outgoingSession.id)\n              this.attendedTransferClear()\n              this.props.attendedTransferCancel(outgoingSession)\n              setTimeout(() => {\n                this.props.closeSession(outgoingSession.id)\n              }, 5000)\n              break\n            default:\n              console.log(`Unknown session state change: ${newState}`)\n              break\n          }\n        })\n        outgoingSession.invite().catch((error: Error) => {\n          this.props.attendedTransferFail(outgoingSession)\n          console.log(error)\n        })\n      } else {\n        console.log('Failed to makeURI')\n      }\n    }\n  }\n\n  attendedTransferClear() {\n    this.setState({ attendedTransferSessionPending: null })\n    this.setState({ attendedTransferSessionReady: null })\n    this.props.started(false)\n  }\n\n  // refers the session in local state\n  connectAttendedTransfer(attendedTransferSession: any) {\n    try {\n      this.props.session.refer(attendedTransferSession)\n      this.props.attendedTransferSuccess()\n      this.setState({ attendedTransferSessionReady: null })\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  cancelAttendedTransfer(attendedTransferSession: any) {\n    attendedTransferSession.cancel()\n    this.props.attendedTransferCancel(attendedTransferSession)\n    this.setState({ attendedTransferSessionPending: null })\n    this.setState({ attendedTransferSession: null })\n  }\n\n  holdAll() {\n    const state = phoneStore.getState()\n    // @ts-ignore\n    const onHolds = state.sipSessions.onHold\n    // @ts-ignore\n    const sessions = state.sipSessions.sessions\n    if (this.props.session.id in onHolds === false) {\n      try {\n        this.props.holdCallRequest(this.props.session)\n      } catch (err) {\n        console.log(err)\n      }\n      return\n    }\n  }\n\n  render() {\n    if (this.state.attendedTransferSessionReady) {\n      const phoneConfigAttended: PhoneConfig = {\n        disabledButtons: ['numpad', 'transfer'],\n        disabledFeatures: [''],\n        defaultDial: '',\n        sessionsLimit: 0,\n        attendedTransferLimit: 0,\n        autoAnswer: false\n      }\n      return (\n        <React.Fragment>\n          <Phone\n            // @ts-ignore\n            session={this.state.attendedTransferSessionReady}\n            phoneConfig={phoneConfigAttended}\n          />\n          <button\n            className={styles.transferButtons}\n            onClick={() => {\n              this.props.started(false)\n              this.connectAttendedTransfer(\n                this.state.attendedTransferSessionReady\n              )\n            }}\n          >\n            <img src={connectIcon} />\n          </button>\n        </React.Fragment>\n      )\n    } else if (this.state.attendedTransferSessionPending) {\n      return (\n        <button\n          className={styles.endCallButton}\n          onClick={() => {\n            this.props.started(false)\n            this.cancelAttendedTransfer(\n              this.state.attendedTransferSessionPending\n            )\n          }}\n        >\n          <img src={cancelIcon} />\n        </button>\n      )\n    } else {\n      return (\n        <button\n          className={styles.transferButtons}\n          onClick={() => {\n            this.props.started(true)\n            this.attendedTransferCall()\n          }}\n        >\n          <img src={attendedIcon} />\n        </button>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  attendedTransfersList: state.sipSessions.attendedTransfers,\n  phoneConfig: state.config.phoneConfig\n})\nconst actions = {\n  holdCallRequest,\n  attendedTransferRequest,\n  attendedTransferCancel,\n  attendedTransferReady,\n  attendedTransferPending,\n  attendedTransferSuccess,\n  attendedTransferFail,\n  attendedTransferLimitReached,\n  stateChange,\n  closeSession,\n}\n\nexport default connect(mapStateToProps, actions)(AttendedTransfer)","import * as React from 'react'\nimport Dialpad from './Dialpad'\nimport { connect } from 'react-redux'\nimport { Session, SessionState, UserAgent } from 'sip.js'\nimport { endCall } from '../../actions/sipSessions'\nimport { setAppConfigStarted } from '../../actions/config'\nimport Hold from './Hold'\nimport Mute from './Mute'\nimport BlindTranfer from './BlindTransfer'\nimport AttendedTransfer from './AttendedTransfer'\nimport styles from './Phone.scss'\nimport { callDisconnect } from '../../util/TonePlayer'\nimport toneManager from '../../util/ToneManager'\nimport { statusMask, getDurationDisplay } from '../../util/sessions'\nimport { PhoneConfig } from '../../models'\n\nconst endCallIcon = require('./assets/call_end-24px.svg')\nconst dialpadIcon = require('./assets/dialpad-24px.svg')\nconst transferIcon = require('./assets/arrow_forward-24px.svg')\n\ninterface Props {\n  session: Session\n  userAgent: UserAgent\n  endCall: Function\n  setAppConfigStarted: Function\n  phoneConfig: PhoneConfig\n  deviceId: string\n  strictMode: string\n  appSize: string\n}\n\nclass Phone extends React.Component<Props> {\n  state = {\n    dialpadOpen: false,\n    transferMenu: false,\n    ended: false,\n    transferDialString: '',\n    attendedTransferStarted: false,\n    duration: 0,\n    counterStarted: false\n  }\n\n  constructor(props: any) {\n    super(props)\n    this.attendedProcess = this.attendedProcess.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.phoneConfig.disabledButtons.includes('dialpadopen')) {\n      this.setState({ dialpadOpen: true })\n    }\n  }\n\n  componentDidUpdate(newProps: Props) {\n    if (newProps.session.state === SessionState.Established && !this.state.counterStarted) {\n      this.handleCounter()\n    }\n    if (\n      newProps.session.state === SessionState.Terminated &&\n      this.state.ended === false\n    ) {\n      this.setState({ ended: true })\n    }\n  }\n\n  endCall() {\n    if (this.props.session.state === SessionState.Established) {\n      this.props.session.bye()\n    } else if (\n      this.props.session.state === SessionState.Initial ||\n      this.props.session.state === SessionState.Establishing\n    ) {\n      toneManager.stopAll()\n      callDisconnect(this.props.deviceId)\n      // @ts-ignore\n      this.props.session.cancel()\n    }\n    this.setState({ ended: true })\n    setTimeout(() => {\n      this.props.session.dispose()\n      this.props.endCall(this.props.session.id)\n      if (this.props.strictMode === 'strict') {\n        this.props.setAppConfigStarted()\n      }\n    }, 5000)\n  }\n\n  attendedProcess(bool: boolean) {\n    this.setState({ attendedTransferStarted: bool })\n  }\n\n  handleCounter() {\n    if (\n      this.props.session &&\n      this.props.session.state !== SessionState.Terminated\n    ) {\n      if (this.state.counterStarted === false) {\n        this.setState({ counterStarted: true })\n      }\n      setTimeout(() => {\n        this.setState({ duration: this.state.duration + 1 })\n        this.handleCounter()\n      }, 1000)\n    }\n  }\n\n  render() {\n    const { state, props } = this\n    let durationDisplay\n    if (props.appSize === 'large') {\n      if (\n        this.props.session.state === SessionState.Initial ||\n        this.props.session.state === SessionState.Establishing\n      ) {\n        durationDisplay = null\n      } else {\n        durationDisplay = (\n          <div className={styles.statusLarge}>\n            {getDurationDisplay(this.state.duration)}\n          </div>\n        )\n      }\n    } else {\n      if (\n        this.props.session.state === SessionState.Initial ||\n        this.props.session.state === SessionState.Establishing\n      ) {\n        durationDisplay = null\n      } else {\n        durationDisplay = <div>{getDurationDisplay(this.state.duration)}</div>\n      }\n    }\n    return (\n      <React.Fragment>\n        {props.phoneConfig.disabledFeatures.includes('remoteid') ? null : (\n          <React.Fragment>\n            {/*<hr style={{ width: '100%' }} />*/}\n            <div>\n              {\n                // @ts-ignore\n                `${props.session.remoteIdentity.uri.normal.user} - ${props.session.remoteIdentity._displayName}`\n              }\n              <br />\n            </div>\n          </React.Fragment>\n        )}\n        {props.appSize === 'large' ? (\n          <div className={styles.statusLarge}>\n            {statusMask(props.session.state)}\n          </div>\n        ) : (\n          <div>{statusMask(props.session.state)}</div>\n        )}\n        <br />\n        {durationDisplay}\n        {state.ended ? null : (\n          <React.Fragment>\n            <Dialpad open={state.dialpadOpen} session={props.session} />\n            <div className={styles.actionsContainer}>\n              {props.phoneConfig.disabledButtons.includes('mute') ? null : (\n                <Mute session={props.session} />\n              )}\n              <button\n                className={styles.endCallButton}\n                disabled={state.ended}\n                onClick={() => this.endCall()}\n              >\n                <img src={endCallIcon} />\n              </button>\n              {props.phoneConfig.disabledButtons.includes('hold') ? null : (\n                <Hold session={props.session} />\n              )}\n              {props.phoneConfig.disabledButtons.includes('numpad') ? null : (\n                <div\n                  id={styles.actionButton}\n                  className={state.dialpadOpen ? styles.on : ''}\n                  onClick={() =>\n                    this.setState({ dialpadOpen: !state.dialpadOpen })\n                  }\n                >\n                  <img src={dialpadIcon} />\n                </div>\n              )}\n              {props.phoneConfig.disabledButtons.includes('transfer') ? null : (\n                <div\n                  id={styles.actionButton}\n                  className={state.transferMenu ? styles.on : ''}\n                  onClick={() =>\n                    this.setState({ transferMenu: !state.transferMenu })\n                  }\n                >\n                  <img src={transferIcon} />\n                </div>\n              )}\n              <div\n                id={styles.transferMenu}\n                className={state.transferMenu ? '' : styles.closed}\n              >\n                <input\n                  id={styles.transferInput}\n                  onChange={(e) =>\n                    this.setState({ transferDialString: e.target.value })\n                  }\n                  placeholder='Введите номер для переадресации'\n                />\n                {this.state.attendedTransferStarted ? null : (\n                  <BlindTranfer\n                    destination={state.transferDialString}\n                    session={props.session}\n                  />\n                )}\n                <AttendedTransfer\n                  started={this.attendedProcess}\n                  destination={state.transferDialString}\n                  session={props.session}\n                />\n              </div>\n            </div>\n            <audio id={this.props.session.id} autoPlay />\n          </React.Fragment>\n        )}\n      </React.Fragment>\n    )\n  }\n}\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged,\n  sessions: state.sipSessions.sessions,\n  userAgent: state.sipAccounts.userAgent,\n  deviceId: state.device.primaryAudioOutput,\n  strictMode: state.config.appConfig.mode,\n  appSize: state.config.appConfig.appSize\n})\nconst actions = {\n  endCall,\n  setAppConfigStarted\n}\nexport default connect(mapStateToProps, actions)(Phone)\n","import * as React from 'react'\nimport { Invitation, SessionState } from 'sip.js'\nimport { connect } from 'react-redux'\nimport styles from './Phone.scss'\nimport { acceptCall, declineCall } from '../../actions/sipSessions'\nimport toneManager from '../../util/ToneManager'\n\nconst acceptIcon = require('./assets/call-24px.svg')\nconst declineIcon = require('./assets/call_end-24px.svg')\nconst ring = require('./assets/ring.mp3')\n\ninterface Props {\n  session: Invitation\n  autoanswer: boolean\n  acceptCall: Function\n  declineCall: Function\n}\n\nclass Incoming extends React.Component<Props> {\n  private timer: any\n\n  componentDidMount() {\n    toneManager.stopAll()\n    toneManager.playRing('ringtone')\n    console.log(`auto-answer is: ${this.props.autoanswer}`)\n    if (this.props.autoanswer) {\n      this.timer = setInterval(() => {\n        this.handleAutoAnswer()\n      }, 1000)\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer)\n  }\n\n  handleAccept() {\n    toneManager.stopAll()\n    if (this.props.session.state === SessionState.Initial) {\n      this.props.session.accept({\n        sessionDescriptionHandlerOptions: {\n          constraints: {\n            audio: true,\n            video: false\n          }\n        }\n      })\n    }\n    this.props.acceptCall(this.props.session)\n  }\n\n  handleAutoAnswer() {\n    console.log('\\n\\n\\n ************ handleAutoAnswer ********** \\n\\n\\n')\n    if (this.props.session.state === SessionState.Initial) {\n      this.handleAccept()\n    }\n    clearInterval(this.timer)\n  }\n\n  handleDecline() {\n    toneManager.stopAll()\n    if (\n      this.props.session.state !== SessionState.Terminated &&\n      this.props.session.state !== SessionState.Terminating\n    ) {\n      this.props.session.reject()\n    }\n    this.props.declineCall(this.props.session)\n  }\n\n  render() {\n    const props = this.props\n    return (\n      <div id={styles.incoming}>\n        {\n          // @ts-ignore\n          `Incoming: ${props.session.remoteIdentity.uri.normal.user} - ${props.session.remoteIdentity._displayName}`\n        }\n        <div\n          className={styles.endCallButton}\n          onClick={() => this.handleDecline()}\n        >\n          <img src={declineIcon} />\n        </div>\n        <div\n          className={styles.startCallButton}\n          onClick={() => this.handleAccept()}\n        >\n          <img src={acceptIcon} />\n        </div>\n        <audio id='ringtone' loop>\n          <source src={ring} type='audio/mpeg' />\n        </audio>\n        <audio id={this.props.session.id} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  stateChanged: state.sipSessions.stateChanged\n})\nconst actions = {\n  acceptCall,\n  declineCall\n}\nexport default connect(mapStateToProps, actions)(Incoming)\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport Phone from './phone/Phone'\nimport Incoming from './phone/Incoming'\nimport { PhoneConfig } from '../models'\n\nconst getSessions = (\n  sessions: any,\n  phoneConfig: PhoneConfig,\n  attendedTransfers: Array<string>,\n  incomingCalls: Array<string>\n) => {\n  const elements = []\n  for (const session in sessions) {\n    if (attendedTransfers.includes(session)) continue\n    if (incomingCalls.includes(session)) {\n      if (Object.keys(sessions).length >= phoneConfig.sessionsLimit + incomingCalls.length){\n        console.log('Невозможно создать больше сеансов...')\n        console.log('Check your phoneConfig.sessionsLimit option!')\n      } else {\n        elements.push(<Incoming session={sessions[session]} key={session} autoanswer={phoneConfig.autoAnswer}/>)\n      }\n    } else {\n      elements.push(\n        <Phone\n          session={sessions[session]}\n          key={session}\n          phoneConfig={phoneConfig}\n        />\n      )\n    }\n  }\n  return elements\n}\n\ninterface Props {\n  sessions: Object\n  incomingCalls: Array<string>\n  phoneConfig: PhoneConfig\n  attendedTransfers: Array<string>\n}\n\nclass PhoneSessions extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        {getSessions(\n          this.props.sessions,\n          this.props.phoneConfig,\n          this.props.attendedTransfers,\n          this.props.incomingCalls\n        )}\n      </React.Fragment>\n    )}\n}\nconst mapStateToProps = (state: any) => ({\n  sessions: state.sipSessions.sessions,\n  incomingCalls: state.sipSessions.incomingCalls,\n  attendedTransfers: state.sipSessions.attendedTransfers\n})\nconst PS = connect(mapStateToProps)(PhoneSessions)\nexport default PS\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport SIPAccount from '../lib/SipAccount'\nimport styles from './Dialstring.scss'\nimport { PhoneConfig, SipConfig, AppConfig } from '../models'\nimport { sessionsLimitReached } from '../actions/config'\n\nconst callIcon = require('./assets/call-24px.svg')\nconst callIconLarge = require('./assets/call-large-40px.svg')\n\ninterface Props {\n  sipAccount: SIPAccount\n  phoneConfig: PhoneConfig\n  sipConfig: SipConfig\n  appConfig: AppConfig\n  sessions: Object\n  started: Boolean\n  sessionsLimitReached: Function\n  attendedTransfersList: Array<string>\n  currentDialString?: string\n  onDialStringChange?(e: React.ChangeEvent<HTMLInputElement>): void\n}\n\nclass Dialstring extends React.Component<Props> {\n  state = {\n    currentDialString: ''\n  }\n\n  get currentDialString(): string {\n    return !!this.props.currentDialString ? this.props.currentDialString : this.state.currentDialString;\n  }\n  handleDial() {\n    const sessionsActive: number = Object.keys(this.props.sessions).length\n    const attendedTransferActive: number = this.props.attendedTransfersList.length\n    const sessionDiff: number = sessionsActive - attendedTransferActive\n\n    // sessionsLimit check\n    if (sessionDiff >= this.props.phoneConfig.sessionsLimit) {\n      this.props.sessionsLimitReached()\n    } else {\n      // strict-mode check\n      if (this.props.appConfig.mode === 'strict') {\n        this.props.sipAccount.makeCall(this.props.phoneConfig.defaultDial)\n      }\n      // dialstring check\n      if (!this.checkDialstring()) {\n        this.props.sipAccount.makeCall(`${this.currentDialString}`)\n      }\n    }\n  }\n\n  checkDialstring() {\n    return this.currentDialString.length === 0\n  }\n\n  render() {\n    const { props } = this\n    if (props.appConfig.mode.includes('strict') && props.started === true) {\n      return (\n        <div className={styles.dialstringContainerStrict}>\n          <button\n            className={styles.dialButtonStrict}\n            onClick={() => this.handleDial()}\n          >\n            <img src={callIconLarge} />\n          </button>\n        </div>\n      )\n    } else if (props.appConfig.mode.includes('strict')) {\n      return null\n    } else {\n      return (\n        <div className={styles.dialstringContainer}>\n          <input\n            className={styles.dialInput}\n            onKeyPress={(e) => {\n              if (e.key === 'Enter') {\n                this.handleDial()\n                e.preventDefault()\n              }\n            }}\n            value={this.currentDialString}\n            placeholder='Введите номер'\n            onChange={(e) => {\n              if (!!this.props.onDialStringChange) {\n                this.props.onDialStringChange(e)\n              } else {\n                this.setState({ currentDialString: e.target.value })\n              }\n            }}\n          />\n          <button\n            className={styles.dialButton}\n            disabled={this.checkDialstring()}\n            onClick={() => this.handleDial()}\n          >\n            <img src={callIcon} />\n          </button>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  sipAccount: state.sipAccounts.sipAccount,\n  sessions: state.sipSessions.sessions,\n  started: state.config.appConfig.started,\n  attendedTransfersList: state.sipSessions.attendedTransfers\n})\n\nconst actions = {\n  sessionsLimitReached\n}\n\nconst D = connect(mapStateToProps, actions)(Dialstring)\nexport default D\n","import { Action } from './models'\nimport {\n  NEW_SESSION,\n  NEW_ATTENDED_TRANSFER,\n  SIPSESSION_ATTENDED_TRANSFER_CANCEL,\n  SIPSESSION_ATTENDED_TRANSFER_FAIL,\n  CLOSE_SESSION,\n  SIPSESSION_STATECHANGE,\n  INCOMING_CALL,\n  ACCEPT_CALL,\n  DECLINE_CALL,\n  SIPSESSION_HOLD_REQUEST,\n  SIPSESSION_UNHOLD_REQUEST\n} from '../actions/sipSessions'\n\nconst sipSessions = (\n  state = {\n    sessions: {},\n    incomingCalls: [],\n    stateChanged: 0,\n    onHold: [],\n    attendedTransfers: []\n  },\n  action: Action\n) => {\n  const { type, payload } = action\n  switch (type) {\n    case INCOMING_CALL:\n      console.log('Incoming call')\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload },\n        incomingCalls: [...state.incomingCalls, payload.id]\n      }\n    case NEW_SESSION:\n      console.log('New session added')\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload }\n      }\n    case NEW_ATTENDED_TRANSFER:\n      return {\n        ...state,\n        sessions: { ...state.sessions, [payload.id]: payload },\n        attendedTransfers: [...state.attendedTransfers, payload.id]\n      }\n    case SIPSESSION_ATTENDED_TRANSFER_CANCEL:\n    case SIPSESSION_ATTENDED_TRANSFER_FAIL: {\n      const newAttendedTransfers = [...state.attendedTransfers].filter(\n        (id) => id !== payload.id\n      )\n      return {\n        ...state,\n        attendedTransfers: newAttendedTransfers\n      }\n    }\n    case ACCEPT_CALL: {\n      const acceptedIncoming = [...state.incomingCalls].filter((id) => id !== payload.id)\n      return {\n        ...state,\n        incomingCalls: acceptedIncoming\n      }\n    }\n    case DECLINE_CALL: {\n      const declinedIncoming = [...state.incomingCalls].filter(\n        (id) => id !== payload.id\n      )\n      const declinedSessions: any = { ...state.sessions }\n      delete declinedSessions[payload.id]\n      return {\n        ...state,\n        incomingCalls: declinedIncoming,\n        sessions: declinedSessions\n      }\n    }\n    case SIPSESSION_STATECHANGE: {\n      return {\n        ...state,\n        stateChanged: state.stateChanged + 1\n      }\n    }\n    case CLOSE_SESSION: {\n      const closedIncoming = [...state.incomingCalls].filter(\n        (id) => id !== payload\n      )\n      const newSessions: any = { ...state.sessions }\n      delete newSessions[payload]\n      const endHold = [...state.onHold].filter((id) => id !== payload)\n\n      return {\n        ...state,\n        sessions: newSessions,\n        incomingCalls: closedIncoming,\n        onHold: endHold\n      }\n    }\n    case SIPSESSION_HOLD_REQUEST: {\n      return {\n        ...state,\n        onHold: [...state.onHold, payload]\n      }\n    }\n    case SIPSESSION_UNHOLD_REQUEST: {\n      const newHold = [...state.onHold].filter((id) => id !== payload)\n\n      return {\n        ...state,\n        onHold: newHold\n      }\n    }\n    default:\n      return state\n  }\n}\n\nexport default sipSessions\n","import { Action } from './models'\nimport { NEW_USERAGENT, NEW_ACCOUNT } from '../actions/sipAccounts'\n\nconst sipAccounts = (\n  state = {\n    sipAccount: null,\n    userAgent: null,\n    status: ''\n  },\n  action: Action\n) => {\n  const { type, payload } = action\n  switch (type) {\n    case NEW_ACCOUNT:\n      return {\n        ...state,\n        sipAccount: action.payload\n      }\n    case NEW_USERAGENT:\n      return {\n        ...state,\n        userAgent: payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default sipAccounts\n","import { Action } from './models'\nimport {\n  AUDIO_INPUT_DEVICES_DETECTED,\n  AUDIO_OUTPUT_DEVICES_DETECTED,\n  SET_PRIMARY_INPUT,\n  SET_PRIMARY_OUTPUT,\n  AUDIO_SINKID_NOT_ALLOWED\n} from '../actions/device'\n\nconst device = (\n  state = {\n    audioInput: [],\n    audioOutput: [],\n    primaryAudioOutput: 'default',\n    primaryAudioInput: 'default',\n    sinkId: true\n  },\n  action: Action\n) => {\n  const { type, payload } = action\n  switch (type) {\n    case AUDIO_INPUT_DEVICES_DETECTED:\n      return {\n        ...state,\n        audioInput: payload\n      }\n    case AUDIO_OUTPUT_DEVICES_DETECTED:\n      return {\n        ...state,\n        audioOutput: payload\n      }\n    case SET_PRIMARY_OUTPUT:\n      return {\n        ...state,\n        primaryAudioOutput: payload\n      }\n    case SET_PRIMARY_INPUT:\n      return {\n        ...state,\n        primaryAudioInput: payload\n      }\n    case AUDIO_SINKID_NOT_ALLOWED:\n      return {\n        ...state,\n        sinkId: false\n      }\n    default:\n      return state\n  }\n}\n\nexport default device\n","// eslint-disable-next-line no-unused-vars\nimport { Action } from './models'\nimport {\n  SET_CREDENTIALS,\n  SET_PHONE_CONFIG,\n  SET_APP_CONFIG,\n  STRICT_MODE_SHOW_CALL_BUTTON,\n  STRICT_MODE_HIDE_CALL_BUTTON\n} from '../actions/config'\n\nconst config = (\n  state = {\n    uri: '',\n    password: '',\n    phoneConfig: {},\n    appConfig: { mode: '', started: false, appSize: '' }\n  },\n  action: Action\n) => {\n  switch (action.type) {\n    case SET_PHONE_CONFIG:\n      return {\n        ...state,\n        phoneConfig: action.payload\n      }\n    case SET_CREDENTIALS:\n      return {\n        ...state,\n        uri: action.payload.uri,\n        password: action.payload.password,\n      }\n    case SET_APP_CONFIG:\n      return {\n        ...state,\n        appConfig: action.payload\n      }\n    case STRICT_MODE_SHOW_CALL_BUTTON:\n      if (state.appConfig.mode === 'strict') {\n        return {\n          ...state,\n          appConfig:{\n            ...state.appConfig,\n            mode: 'strict',\n            started: true\n          }\n        }\n      }\n      return state\n    case STRICT_MODE_HIDE_CALL_BUTTON:\n      if (state.appConfig.mode === 'strict'){\n        return {\n          ...state,\n          appConfig:{\n            ...state.appConfig,\n            mode: 'strict',\n            started: false\n          }\n        }\n      }\n      return state\n    default:\n      return state\n  }\n}\n\nexport default config\n","import { combineReducers } from 'redux'\nimport sipSessions from './sipSessions'\nimport sipAccounts from './sipAccounts'\nimport device from './device'\nimport config from './config'\n\nconst reducers: any = combineReducers({\n  sipAccounts,\n  sipSessions,\n  device,\n  config\n})\n\nexport default reducers\n","import { composeWithDevTools } from 'redux-devtools-extension'\nimport { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport reducers from '../reducers/index'\n\nconst middleware = [thunk]\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  whitelist: ['device']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducers)\n\nexport const defaultStore = createStore(\n  persistedReducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\nexport const persistor = persistStore(defaultStore)\n","import * as React from 'react'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport styles from './styles.scss'\nimport SipWrapper from './SipWrapper'\nimport Status from './components/Status'\nimport PhoneSessions from './components/PhoneSessions'\nimport Dialstring from './components/Dialstring'\n// eslint-disable-next-line no-unused-vars\nimport { SipConfig, SipCredentials, PhoneConfig, AppConfig } from './models'\nimport { DialpadComponent, DialpadProps } from './components/phone/Dialpad'\nimport { defaultStore, persistor } from './store/configureStore'\n\ninterface Props {\n  width: number\n  height: number\n  name: string\n  currentDialString?: string\n  phoneConfig: PhoneConfig\n  sipCredentials: SipCredentials\n  sipConfig: SipConfig\n  appConfig: AppConfig\n  containerStyle: any\n  onDialStringChange?(e: React.ChangeEvent<HTMLInputElement>): void\n}\n\nexport const phoneStore = defaultStore\n\nexport const Dialpad = DialpadComponent\n\nexport type { DialpadProps }\n\nexport const ReactSipPhone = ({\n  name,\n  phoneConfig,\n  sipConfig,\n  appConfig,\n  sipCredentials,\n  currentDialString,\n  onDialStringChange,\n  containerStyle = {}\n}: Props) => {\n  // If no store is passed into component, default store is used\n  return (\n    <Provider store={phoneStore}>\n      <PersistGate loading={null} persistor={persistor}>\n        <SipWrapper\n          sipConfig={sipConfig}\n          sipCredentials={sipCredentials}\n          phoneConfig={phoneConfig}\n          appConfig={appConfig}\n        >\n          <div\n            className={styles.container}\n            style={{\n              ...containerStyle,\n            }}\n          >\n            <Status\n              phoneConfig={phoneConfig}\n              appConfig={appConfig}\n              name={name}\n            />\n            {phoneConfig.disabledFeatures.includes('dialstring') ? null : (\n              <Dialstring\n                currentDialString={currentDialString}\n                onDialStringChange={onDialStringChange}\n                sipConfig={sipConfig}\n                phoneConfig={phoneConfig}\n                appConfig={appConfig}\n              />\n            )}\n\n            <PhoneSessions phoneConfig={phoneConfig} />\n            <audio id='tone' autoPlay />\n          </div>\n        </SipWrapper>\n      </PersistGate>\n    </Provider>\n  )\n}\n"],"names":["NEW_USERAGENT","NEW_ACCOUNT","setNewAccount","account","type","payload","NEW_SESSION","NEW_ATTENDED_TRANSFER","INCOMING_CALL","ACCEPT_CALL","DECLINE_CALL","SIPSESSION_STATECHANGE","CLOSE_SESSION","SIPSESSION_HOLD_REQUEST","SIPSESSION_HOLD_FAIL","SIPSESSION_UNHOLD_REQUEST","SIPSESSION_UNHOLD_FAIL","SIPSESSION_MUTE_REQUEST","SIPSESSION_MUTE_SUCCESS","SIPSESSION_MUTE_FAIL","SIPSESSION_UNMUTE_REQUEST","SIPSESSION_UNMUTE_SUCCESS","SIPSESSION_UNMUTE_FAIL","SIPSESSION_BLIND_TRANSFER_REQUEST","SIPSESSION_BLIND_TRANSFER_SUCCESS","SIPSESSION_BLIND_TRANSFER_FAIL","SIPSESSION_ATTENDED_TRANSFER_REQUEST","SIPSESSION_ATTENDED_TRANSFER_PENDING","SIPSESSION_ATTENDED_TRANSFER_READY","SIPSESSION_ATTENDED_TRANSFER_CANCEL","SIPSESSION_ATTENDED_TRANSFER_FAIL","SIPSESSION_ATTENDED_TRANSFER_SUCCESS","stateChange","newState","id","dispatch","state","closeSession","acceptCall","session","declineCall","endCall","sessionId","holdCallRequest","sessionDescriptionHandler","SessionState","Established","invite","sessionDescriptionHandlerModifiers","holdModifier","err","unHoldCallRequest","onHolds","sessions","Object","entries","_session","indexOf","blindTransferRequest","blindTransferSuccess","blindTransferFail","attendedTransferRequest","attendedTransferCancel","attendedTransferReady","attendedTransferPending","attendedTransferSuccess","attendedTransferFail","muteRequest","muteSuccess","muteFail","unMuteRequest","unMuteSuccess","unMuteFail","SET_CREDENTIALS","SET_PHONE_CONFIG","SET_APP_CONFIG","STRICT_MODE_SHOW_CALL_BUTTON","STRICT_MODE_HIDE_CALL_BUTTON","ATTENDED_TRANSFER_LIMIT_REACHED","SESSIONS_LIMIT_REACHED","setCredentials","uri","password","setPhoneConfig","config","setAppConfig","setAppConfigStarted","attendedTransferLimitReached","sessionsLimitReached","holdAll","phoneStore","getState","sipSessions","onHold","AUDIO_INPUT_DEVICES_DETECTED","AUDIO_OUTPUT_DEVICES_DETECTED","REMOTE_AUDIO_CONNECTED","REMOTE_AUDIO_FAIL","LOCAL_AUDIO_CONNECTED","SET_PRIMARY_OUTPUT","SET_PRIMARY_INPUT","SET_LOCAL_AUDIO_SESSIONS_PENDING","SET_LOCAL_AUDIO_SESSION_SUCCESS","SET_LOCAL_AUDIO_SESSION_FAIL","SET_REMOTE_AUDIO_SESSIONS_PENDING","SET_REMOTE_AUDIO_SESSION_SUCCESS","SET_REMOTE_AUDIO_SESSION_FAIL","AUDIO_SINKID_NOT_ALLOWED","getInputAudioDevices","inputArray","navigator","mediaDevices","enumerateDevices","then","devices","forEach","device","kind","push","getOutputAudioDevices","outputArray","setPrimaryOutput","deviceId","keys","length","mediaElement","document","getElementById","remoteStream","MediaStream","peerConnection","getReceivers","receiver","track","addTrack","setSinkId","srcObject","play","console","log","setPrimaryInput","sinkIdAllowed","getSenders","sender","audioDeviceId","getUserMedia","audio","stream","audioTrack","getAudioTracks","replaceTrack","setRemoteAudio","primaryAudioOutput","sinkId","setLocalAudio","primaryAudioInput","cleanupMedia","pause","Tone","require","DTMF_MATRIX","A","B","C","D","Synth","PolySynth","FMSynth","playDTMF","key","obj","volume","value","set","oscillator","envelope","attack","decay","sustain","release","dest","context","createMediaStreamDestination","connect","toMaster","triggerAttackRelease","callDisconnect","triggerAttack","triggerRelease","TonePlayer","loop","Loop","time","start","Transport","stop","promise","undefined","error","ToneManager","playRing","currentTone","ringback","ringtone","stopAll","toneManager","SessionStateHandler","ua","params","Establishing","myTransport","transport","on","message","includes","cancel","dispose","setTimeout","onSessionEstablishing","onSessionEstablished","Terminating","onSessionTerminating","Terminated","onSessionTerminated","getFullNumber","number","defaultCountryCode","sipAccounts","sipAccount","_config","fullNumber","startsWith","replace","statusMask","status","getDurationDisplay","duration","minutes","Math","floor","hours","seconds","dh","dm","ds","IncomingSessionStateHandler","incomingSession","SIPAccount","sipConfig","sipCredentials","_credentials","UserAgent","makeURI","sipuri","Error","transportOptions","server","websocket","userAgentOptions","autoStart","autoStop","noAnswerTimeout","logBuiltinEnabled","process","env","NODE_ENV","logConfiguration","logLevel","authorizationPassword","userAgentString","hackWssInTransport","sessionDescriptionHandlerFactoryOptions","constraints","video","alwaysAcquireMediaFirst","iceCheckingTimeout","registererOptions","expires","_userAgent","_registerer","Registerer","setupDelegate","register","setupRegistererListener","delegate","onInvite","invitation","onRefer","referral","stateHandler","addListener","RegistererState","Initial","Registered","Unregistered","makeCall","sessionsLimit","phoneConfig","sessionsActiveObject","strictMode","appConfig","mode","attendedTransfersActive","attendedTransfers","sessionsActive","sessionDiff","target","split","inviter","Inviter","outgoingSession","onStartNewSession","listener","SipWrapper","componentDidMount","props","initializeSip","render","React","children","mapStateToProps","actions","settingsIcon","micIcon","soundIcon","Status","settingsMenu","mapOptions","options","list","map","option","label","handleChangeDevice","inputs","outputs","className","styles","container","appSize","userStringLarge","name","userString","disabledFeatures","settingsButton","onClick","setState","src","closed","style","width","dropdownRow","dropdownIcon","Select","placeholder","find","output","primaryOutput","onChange","dropdowns","input","primaryInput","audioInput","audioOutput","DialButton","text","click","letters","dialpadButton","opacity","dialpadButtonLetters","getButtonLetters","Dialpad","x","topRow","getButton","toString","middleRow","bottomRow","handleClick","onButtonClick","sendDTMF","requestOptions","body","contentDisposition","contentType","content","info","open","dialpad","dialpadRow","holdIcon","Hold","hold","checkHoldState","actionButton","stateChanged","userAgent","micOffIcon","Mute","onMute","mute","Promise","resolve","reject","pc","enabled","blindIcon","BlindTransfer","blindTransferCall","destination","refer","transferButtons","attendedIcon","cancelIcon","connectIcon","AttendedTransfer","attendedTransferSessionPending","attendedTransferSessionReady","attendedTransferCall","attendedTransfersList","attendedTransferLimit","attendedTransferClear","started","connectAttendedTransfer","attendedTransferSession","cancelAttendedTransfer","phoneConfigAttended","disabledButtons","defaultDial","autoAnswer","Phone","endCallButton","endCallIcon","dialpadIcon","transferIcon","dialpadOpen","transferMenu","ended","transferDialString","attendedTransferStarted","counterStarted","attendedProcess","bind","componentDidUpdate","newProps","handleCounter","bye","bool","durationDisplay","statusLarge","remoteIdentity","normal","user","_displayName","actionsContainer","disabled","transferInput","e","BlindTranfer","autoPlay","acceptIcon","declineIcon","ring","Incoming","autoanswer","timer","setInterval","handleAutoAnswer","componentWillUnmount","clearInterval","handleAccept","accept","sessionDescriptionHandlerOptions","handleDecline","incoming","startCallButton","getSessions","incomingCalls","elements","PhoneSessions","PS","callIcon","callIconLarge","Dialstring","currentDialString","handleDial","attendedTransferActive","checkDialstring","dialstringContainerStrict","dialButtonStrict","dialstringContainer","dialInput","onKeyPress","preventDefault","onDialStringChange","dialButton","action","newAttendedTransfers","filter","acceptedIncoming","declinedIncoming","declinedSessions","closedIncoming","newSessions","endHold","newHold","reducers","combineReducers","middleware","thunk","persistConfig","storage","whitelist","persistedReducer","persistReducer","defaultStore","createStore","composeWithDevTools","applyMiddleware","persistor","persistStore","DialpadComponent","ReactSipPhone","containerStyle","Provider","store","PersistGate","loading"],"mappings":"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"}